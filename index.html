<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Signee</title>
    <style>
      html,
      body {
        height: 100%;
        margin: 0;
        font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', 'Segoe UI', cursive, sans-serif;
        background: linear-gradient(135deg, #a0c4ff, #bdb2ff);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      h1 {
        color: #333;
        font-size: 20px;
        margin-bottom: 20px;
        background: #fff;
        padding: 10px 16px;
        border-radius: 16px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      #canvas {
        background: #fff;
        border: 4px dashed #8ecae6;
        border-radius: 16px;
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
        touch-action: none;
      }
    </style>
  </head>
  <body>
    <h1>Draw your signature here ✍️</h1>
    <canvas id="canvas" width="800" height="600"></canvas>
    <script src="https://cdn.jsdelivr.net/npm/signee/dist/index.umd.js"></script>
    <script>
      const width = 800
      const height = 600
      const canvas = document.getElementById('canvas')
      canvas.width = width
      canvas.height = height
      canvas.style.width = width + 'px'
      canvas.style.height = height + 'px'

      const signee = new Signee({
        canvas,
        width,
        height,
        scale: window.devicePixelRatio, // optional
        // optional, mobile platform need to pass this
        // uni.requestAnimationFrame uniapp
        // wx.requestAnimationFrame wechat mini program
        // window.requestAnimationFrame browser
        requestAnimationFrame: cb => window.requestAnimationFrame(cb)
      })

      let mousedowned = false

      const start = e => {
        mousedowned = true
        signee.start({
          x: e.touches ? e.touches[0].clientX : e.offsetX,
          y: e.touches ? e.touches[0].clientY : e.offsetY,
          t: Date.now()
        })
      }

      const move = e => {
        if (!mousedowned) return
        signee.draw({
          x: e.touches ? e.touches[0].clientX : e.offsetX,
          y: e.touches ? e.touches[0].clientY : e.offsetY,
          t: Date.now()
        })
      }

      const end = () => {
        mousedowned = false
        signee.end()
      }

      // mouse event
      canvas.addEventListener('mousedown', start)
      canvas.addEventListener('mousemove', move)
      canvas.addEventListener('mouseup', end)
      canvas.addEventListener('mouseleave', end)

      // touch event
      canvas.addEventListener('touchstart', e => {
        e.preventDefault()
        start(e)
      })
      canvas.addEventListener('touchmove', e => {
        e.preventDefault()
        move(e)
      })
      canvas.addEventListener('touchend', e => {
        e.preventDefault()
        end()
      })
    </script>
  </body>
</html>
